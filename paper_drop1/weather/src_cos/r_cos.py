#!/usr/bin/env python

import sys
import numpy as np

# napa lines:
napa_1990 = "-0.17583422079612643,-0.009483316428472667,-0.19315885325046395,-0.8090599944889885,0.11796801864671852,-0.23498925145479735,0.30804578420846984,-0.028990774631928923,-0.14687440014079992,-0.1257121241391284,-0.15167052461319414,-0.2419574717583007,0.10760385174908452,0.05707162291242756,-0.5188135572587671,0.8841459905081229,0.12643686038489885,-0.2584644815042064,0.21750697875358946,0.9900714164224477,-1.0220180701305548,0.8855439353116955,-0.18526775242913932,-0.26808491153450725,0.09251775440903458,1.5839927869118722,-1.3286701761020379,1.2944314829836017,-0.20760395176968938,-0.27764589013970425,0.5605323373129072,0.9171552190708929,-1.4953398782082814,1.100024818183698,-0.18370313161176935,-0.25009507831815136,1.3786897184871527,0.24926273486995662,-1.3585199149506337,1.3877235874871416,-0.20320459775764724,-0.2984513348867722,1.078379542564849,0.7392322119210459,-0.9440971028282743,0.5019390210695444,-0.16235118917483352,-0.2936063774440106,1.5293807568259201,0.9235506677706113,-1.4861539948191012,1.0399918557255683,-0.20292801319525297,-0.2735687008774261,0.9979976346006255,-1.1395559878831927,-1.1779377145816434,1.044753879365323,-0.17818328312217405,-0.2586272206071122,0.15846904759563624,0.8440418804972871,-0.8641759392564414,-1.7249509222479553,-0.022207901343427167,-0.23656524891028785,-0.4187645257433977,1.5341916017864203,-0.5269419805770975,-0.6039880150454565,-0.01893764364042212,-0.23937527314622487"
napa_2000 = "0.4740296470580046,-1.0719003244486716,0.5768216933488127,-0.41751195001973884,-0.147442213809498,-0.23498925145479735,0.5258307508680361,-1.1174638192171045,0.5325562008140511,-0.018355377179641287,-0.15167052461319414,-0.2419574717583007,0.5331411171219866,-0.7747579413585012,0.4749626576568546,0.3025463081068003,-0.18093398038203207,-0.2584644815042064,0.325839393381024,-0.8253555392030412,0.2444252439182423,0.4043274512147292,-0.18526775242913932,-0.26808491153450725,0.3001127042903349,-0.5071954671850604,0.20788980853329922,0.8902326427741276,-0.20760395176968938,-0.27764589013970425,0.21185438469406925,-0.9550942134371897,0.009986400447492692,1.1393457811147067,-0.18370313161176935,-0.25009507831815136,-0.04247150706997074,-0.8903576641526796,-0.018013360865191723,1.0385307893413274,-0.20320459775764724,-0.2984513348867722,0.01566191261989564,-0.2933342244067695,0.026234644328258856,0.7040990655489386,-0.16235118917483352,-0.2936063774440106,0.35228705980272146,-0.13652185360484753,0.22147970356039312,0.34239707342519854,-0.20292801319525297,-0.2735687008774261,0.4604076590145635,-0.5910524310664574,0.31159594434333404,0.018315606250430844,-0.17818328312217405,-0.2586272206071122,0.4419784286718917,-0.9038479133628743,0.4020902041580674,-0.2542464311235076,-0.022207901343427167,-0.23656524891028785,0.4824176838067499,-1.058674634204096,0.5260416081843069,-0.26360255862501686,-0.01893764364042212,-0.23937527314622487"
napa_2010 = "0.17263021349783092,-0.2635683175994186,-0.3559003340299953,-0.7055478356620508,2.734618537956386,-0.23498925145479735,0.06929584081761239,-0.468090696027085,-0.25837787192065104,-0.7243007450526439,0.45248747533477135,-0.2419574717583007,0.042212956773087375,0.24134021761519808,-0.5858530789506257,-0.7074965642695876,0.26431648378484823,-0.2584644815042064,0.13553217715650054,1.2136729931157781,-1.2503073426181164,-0.46391798498883147,-0.18098514620380718,-0.26808491153450725,0.05088528986250243,1.208049860628749,-1.7481553479426957,-0.3519258399967486,-0.19430573867150183,-0.27764589013970425,0.5284331802031297,1.1716064482619613,-2.006588462276933,-0.3355812200708027,-0.18370313161176935,-0.25009507831815136,0.5022925936564301,0.595729281393241,-0.39516662905970584,-0.471343159063258,1.7405840023476642,-0.2984513348867722,0.44776278502807804,0.7642979605527841,-0.24505362152052632,-0.7013643314579793,0.6711763067287483,-0.2936063774440106,0.6431205161363156,0.8885482731968934,-0.9426449760981211,-0.8787025418643346,0.47528438381536303,-0.2735687008774261,0.20240131037743478,0.500304446318045,-0.3365853364049173,-0.7813707009204106,0.6982124616887148,-0.2586272206071122,-0.047216013463112126,0.7986421455918282,-0.7952025598011316,-0.5653709372351094,0.0021532503824211835,-0.23656524891028785,0.15636420033320628,-0.416164285991294,-0.2758427739042889,-0.985772108235249,0.10578674333208077,-0.23937527314622487"


# helpers
def str_to_np(in_str):
    a = in_str.strip().split(",")
    py_list = []
    for i in a:
        py_list.append(float(i))
    return np.array(py_list)


def cos_sim(v1, v2):
    return v1.dot(v2) / np.linalg.norm(v1) / np.linalg.norm(v2)


v_napa_1990 = str_to_np(napa_1990)
v_napa_2000 = str_to_np(napa_2000)
v_napa_2010 = str_to_np(napa_2010)

for l in sys.stdin:
    k, v = l.strip().split("\t")

    if 'None' not in v and '\\N' not in v:
        np_v = str_to_np(v)

        d1990 = cos_sim(v_napa_1990, np_v)
        d2000 = cos_sim(v_napa_2000, np_v)
        d2010 = cos_sim(v_napa_2010, np_v)

        print("%s,1990,%s" % (k, d1990))
        print("%s,2000,%s" % (k, d2000))
        print("%s,2010,%s" % (k, d2010))





